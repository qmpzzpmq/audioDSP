<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Matlab,efficiency," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="It is a common sense that the efficiency of Matlab is inferior to the efficienct of C programme,especially for “for cycle promamme”. so the “for cycle matlab progamme” can be replaced by C programme.">
<meta property="og:type" content="article">
<meta property="og:title" content="how to accelerate your Matlab programme -mex method(1)">
<meta property="og:url" content="http://yoursite.com/2017/02/10/mex/index.html">
<meta property="og:site_name" content="AudioDSP">
<meta property="og:description" content="It is a common sense that the efficiency of Matlab is inferior to the efficienct of C programme,especially for “for cycle promamme”. so the “for cycle matlab progamme” can be replaced by C programme.">
<meta property="og:updated_time" content="2017-02-23T03:42:50.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="how to accelerate your Matlab programme -mex method(1)">
<meta name="twitter:description" content="It is a common sense that the efficiency of Matlab is inferior to the efficienct of C programme,especially for “for cycle promamme”. so the “for cycle matlab progamme” can be replaced by C programme.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/02/10/mex/"/>





  <title> how to accelerate your Matlab programme -mex method(1) | AudioDSP </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">AudioDSP</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">Charlie'sToy</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/10/mex/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Charlie_Tang">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/images/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="AudioDSP">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="AudioDSP" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                how to accelerate your Matlab programme -mex method(1)
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-10T18:07:09+08:00">
                2017-02-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Matlab/" itemprop="url" rel="index">
                    <span itemprop="name">Matlab</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>It is a common sense that the efficiency of Matlab is inferior to the efficienct of C programme,especially for “for cycle promamme”. so the “for cycle matlab progamme” can be replaced by C programme.</p>
<h1 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h1><p>As we know, the newest Matlab(2016b) support the Hybrid Programming in Matlab programme with C or C++ programme. Also the Matlab offer a tool named <em>Matlab Coder</em> to transfer your Matlab programme to C programme or C++ programme.</p>
<p>So the C or C++ programme transferring from <em>Matlab Coder</em> replaced Matlab in some key section. These are the basis of the acceleration Matlab programming.</p>
<h1 id="2-How-to-ues-Matlab-coder"><a href="#2-How-to-ues-Matlab-coder" class="headerlink" title="2. How to ues Matlab coder"></a>2. How to ues <em>Matlab coder</em></h1><h2 id="2-1-Before-you-strat-transferring"><a href="#2-1-Before-you-strat-transferring" class="headerlink" title="2.1 Before you strat transferring"></a>2.1 Before you strat transferring</h2><p>There are something you should know before the transferring your Matlab programme.</p>
<ul>
<li><em>Matlab coder</em> could not transfer the script nor live script only the function.</li>
<li><em>Matlab coder</em> do not support all the function, please prgramming Matlab in C programming thinking.</li>
<li>Please transferring the Matlab programming which strictly follow the coding style.</li>
<li>Please certain the type the input and output matrix. like column vector,row vector,scalar or matrix.</li>
<li>I strongly recommend that all the input,output coefficients and intermediante variables should assigned a specific data type in Matlab programme, like logic,uint8,uint16 single or double.</li>
<li>I also strongly recommend that there also should have a script as testbench which call the funcion you want transfer. Please programming this testbench following the testbench standard. And also you can just use the original dscript</li>
</ul>
<h2 id="2-2-Start-your-transferring-your-Matlab-programming"><a href="#2-2-Start-your-transferring-your-Matlab-programming" class="headerlink" title="2.2 Start your transferring your Matlab programming."></a>2.2 Start your transferring your Matlab programming.</h2><p>Just use <em>coder</em> in command window, there is the the <em>Matlab coder</em></p>
<p>###2.2.1 Select<br>In the first step, you can select the which funcion(.m file) you want transferring and numeric conversion.<br>If you did the <em>assign a specific data type</em>, just forget numeric conversion.<br>If your Matlab program is unstable, you can leave all you variables as double type.</p>
<h3 id="2-2-2-Review"><a href="#2-2-2-Review" class="headerlink" title="2.2.2 Review"></a>2.2.2 Review</h3><p>In second step, the coder will check availbility of the funcion. For example, the tool will check all the availability in of funcion you call in your funcion for <em>Matlab Coder</em> and the syntax error.</p>
<h3 id="2-2-3-Define"><a href="#2-2-3-Define" class="headerlink" title="2.2.3 Define"></a>2.2.3 Define</h3><p>In third step, you must assign every your input and output variables data type. However, if you have a testbench like a upper layer funcion or script(personal recommend: script), the input data type will be define automatically.</p>
<h3 id="2-2-4-Check-Run-time-Issue"><a href="#2-2-4-Check-Run-time-Issue" class="headerlink" title="2.2.4 Check Run-time Issue"></a>2.2.4 Check Run-time Issue</h3><p>In this step, the <em>Matlab coder</em> will creat a trial C or C++ coder with MEX interface. this trail code is generated for Matlab host operation environment.<br>And then the tool will check the result of C/C++ with original Matlab programme. And also you will find there is a new codgen subfolder in whcih there are subfolder name mex. All the intermediate files will store in the mex folder.Further, the mex folder is useful.</p>
<p>Also you can find the called funcion stack(if the function you want transfer also call some subfunctions) </p>
<p>By the way, MEX is the interface between Matlab and C/C++/Fortran. All C/C++/Fortran must called through MEX interface. Even you want call a C/C++/Fortran programming, please write a mex interface funcion as a interface.</p>
<h3 id="2-2-5-Generate"><a href="#2-2-5-Generate" class="headerlink" title="2.2.5 Generate"></a>2.2.5 Generate</h3><p>Congratulation! <em>Matlab Coder</em> finished all checking in step. </p>
<p>Now let’s get start to transferring. First of Generating, there are some key setting you must take care. </p>
<ul>
<li><strong>Build type</strong>:there are 5 different options, “Source code, MEX,Static libarary(.a),Dynamic library(.so),Executable”.</li>
</ul>
<p>Unfornately I only used the firs two options( Source code &amp; MEX), if you just want accelerate your Matlab programme. please select the MEX. If you also want see your source code(like C/C++), please select the Source code.</p>
<p>If you select the the option, source code, there are extra option you must select. these are showed below.</p>
<ul>
<li><p><strong>Language</strong><br>As I mentioned above, please select C or C++.</p>
</li>
<li><p><strong>Hardware Board &amp; Device</strong><br>Please assign a running environment for the transferred source code. It is very important to the number of different data type(like 8bit or 16bit). However there are a sweet Matlab Host Computer you can select.</p>
</li>
<li><p><strong>ToolChain</strong><br>Just a selection to assign a compile tool like GCC or something else to <em>Matlab Coder</em>.</p>
</li>
</ul>
<p>OK, there are all for transferring your Matlab programme to C/C++.</p>
<h1 id="3-How-to-use-your-source-code-or-your-MEX-function"><a href="#3-How-to-use-your-source-code-or-your-MEX-function" class="headerlink" title="3.How to use your source code or your MEX function."></a>3.How to use your <strong>source code</strong> or your MEX function.</h1><p>No, there are Mex function or source code in your folders. you can call it like a mex function just a Matlab progamme.</p>
<p>For example, the original funcion named <em>1.m</em>, you call it like […]=1(…). Now you can call […]=1_mex(…)()<br>(if you select the MEX option in <em>2.2.5 Generate</em>)<br>1_m is running as C/C++ progamme.</p>
<p>If you select MEX option in in <em>2.2.5 Generate</em>, Matlab will call Generated MEX funcion in that step. Otherwise Matlab will call the Generated MEX funcion in the <em>2.2.4 Check Run-time Issue</em>. But I strongly recommened you select the MEX in <em>2.2.5 Generate</em> step. Anyway the MEX function generated in <em>2.2.4 Check Run-time Issue</em> is just a trail funcion.</p>
<h1 id="4-matters-needing-attention"><a href="#4-matters-needing-attention" class="headerlink" title="4 matters needing attention"></a>4 matters needing attention</h1><p>Anyway, the MEX or source code are not fitting everything. In some cases, please do not use this method.</p>
<h2 id="4-1-Date-type"><a href="#4-1-Date-type" class="headerlink" title="4.1 Date type"></a>4.1 Date type</h2><p>As mentioned above, I personnal strongly recommended assigning data type to every input, output and intermediate variables. But, if the funcion is unstable and need to be adjusted, which means you may change your data type or matrix size. Please use the original Matlab programme. Do not waste your time in transferring programme after everytimes adjusting. In my opinion, this method is quite fittin build the running environment, because it is stable.</p>
<h2 id="4-2-tools-tips"><a href="#4-2-tools-tips" class="headerlink" title="4.2 tools tips"></a>4.2 tools tips</h2><p>Anyway, #Matlab coder# is just a tool attached in Matlab. There are some little bugs and inconverience. From my experience using in a Linux distortion, there always are some problem with overwrite a previous Mex function. Also, if you transfer the function more than 1, Ok, sometimes you will meet a unreasonable mistaking.</p>
<h2 id="4-3-Next-plan"><a href="#4-3-Next-plan" class="headerlink" title="4.3 Next plan"></a>4.3 Next plan</h2><p>Except Mex method, I don’t other method to accelerate running of Matlab programme. If I get any ideas, I will renew my blog.</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Matlab/" rel="tag"># Matlab</a>
          
            <a href="/tags/efficiency/" rel="tag"># efficiency</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/02/06/multiple_coeffi/" rel="next" title="how to transfer cofficients in multi-layer matlab programm efficiently(1)">
                <i class="fa fa-chevron-left"></i> how to transfer cofficients in multi-layer matlab programm efficiently(1)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/images/avatar.jpg"
               alt="Charlie_Tang" />
          <p class="site-author-name" itemprop="name">Charlie_Tang</p>
          <p class="site-description motion-element" itemprop="description">Just a place to write some shit</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-Introduction"><span class="nav-number">1.</span> <span class="nav-text">1. Introduction</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-How-to-ues-Matlab-coder"><span class="nav-number">2.</span> <span class="nav-text">2. How to ues Matlab coder</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-Before-you-strat-transferring"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 Before you strat transferring</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-Start-your-transferring-your-Matlab-programming"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 Start your transferring your Matlab programming.</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2-Review"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.2.2 Review</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-3-Define"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.2.3 Define</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-4-Check-Run-time-Issue"><span class="nav-number">2.2.3.</span> <span class="nav-text">2.2.4 Check Run-time Issue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-5-Generate"><span class="nav-number">2.2.4.</span> <span class="nav-text">2.2.5 Generate</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-How-to-use-your-source-code-or-your-MEX-function"><span class="nav-number">3.</span> <span class="nav-text">3.How to use your source code or your MEX function.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-matters-needing-attention"><span class="nav-number">4.</span> <span class="nav-text">4 matters needing attention</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-Date-type"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 Date type</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-tools-tips"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 tools tips</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-Next-plan"><span class="nav-number">4.3.</span> <span class="nav-text">4.3 Next plan</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Charlie_Tang</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  

  
      <!-- UY BEGIN -->
      <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid="></script>
      <!-- UY END -->
  




  
  

  

  

  

  


</body>
</html>
